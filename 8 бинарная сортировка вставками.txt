#include <iostream>
using std::cout;
using std::cin;

int binarySearch(int a[], int item, int low, int high)
{
	while (low <= high) {
		int mid = low + (high - low) / 2;
		if (item == a[mid])
			return mid +1;
		else if (item > a[mid])
			low = mid + 1;
		else
			high = mid - 1;
	}
	return low;
}

// сортировка вставками с бинарным поиском
void insertionSort(int a[], int n)
{
	int i, loc, j, selected;

	for (i = 1; i < n; ++i) {
		j = i - 1;
		selected = a[i];

		// найти место, куда нужно вставить выбранный элемент
		loc = binarySearch(a, selected, 0, j);

		// Переместите все элементы после найденного места, чтобы создать место для вставки
		while (j >= loc) {
			a[j + 1] = a[j];
			j--;
		}
		a[j + 1] = selected;
	}
}

int main()
{
	/*cout << "N: ";
	int n; cin >> n;
	int* a = new int[n];
	for (int i = 0; i < n; ++i)
		cin >> a[i];*/

	int a[]	= { 37, 23, 0, 17, 12, 72, 31, 46, 100, 88, 54 };
	int n = sizeof(a) / sizeof(a[0]);

	cout << "Unsorted array: \n";
	for (int i = 0; i < n; ++i)
		cout << " " << a[i];
	cout << '\n';

	insertionSort(a, n);

	cout << "Sorted array: \n";
	for (int i = 0; i < n; ++i)
		cout << " " << a[i];
	cout << '\n';

	//cin.ignore();
	cin.get();
	return 0;
}